var N=Object.defineProperty,j=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var b=(i,s,e)=>s in i?N(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e,w=(i,s)=>{for(var e in s||(s={}))V.call(s,e)&&b(i,e,s[e]);if(x)for(var e of x(s))P.call(s,e)&&b(i,e,s[e]);return i},I=(i,s)=>j(i,M(s));import{q as S,u as $,r as H,x as O,o as l,c as u,E as k,G as B,d as t,b as a,e as _,F as h,f as g,H as A,n as m,I as D,V as Y,j as v,t as f,w as C,h as q,B as z,J as G}from"./vendor.9182a9ef.js";import{_ as J,L as R}from"./index.d99c710f.js";import{g as T}from"./index.c628ca2a.js";import{B as K}from"./Base3d.0caabbf3.js";const Q={class:"loading"},U={class:"product",id:"product"},W={class:"title"},X={class:"content"},Z=v(" \u4EA7\u54C1\u63A8\u8350 "),ee={class:"products"},se=["onClick"],te={class:"prod-title"},oe={class:"img"},ne=["src","alt"],ae=v(" \u52A0\u5165\u8D2D\u7269\u8F66 "),de=v(" \u5207\u6362\u4F7F\u7528\u573A\u666F "),ie={class:"scenes"},ce=["onClick"],re=["src","alt"],le={setup(i){S();const s=$(),e=H({products:[],isLoading:!0,scenes:[],pIndex:0,sceneIndex:0,base3d:{},descIndex:0,progress:0});function y(){e.isLoading=!1}O(async()=>{let n=await T();console.log(n),e.products=n.list,e.scenes=n.hdr,e.base3d=new K("#product",y),e.base3d.onProgress(d=>{let c=d.loaded/d.total;c=c.toFixed(2)*100,e.progress=c})});function L(n,d){e.pIndex=d,e.base3d.setModel(n.modelName)}function F(n,d){e.sceneIndex=d,e.base3d.setEnvMap(n)}function E(n){let d=I(w({},n),{num:1}),c=0;s.state.buycarts.some((r,p)=>d.id==r.id?(c=p,!0):!1)?s.commit("addBuycartsNum",c):s.commit("addBuycarts",d)}return window.addEventListener("mousewheel",n=>{n.deltaY>0&&s.commit("setFullscreen",!0),n.deltaY<0&&s.commit("setFullscreen",!1)}),window.addEventListener("mousewheel",n=>{let d=e.base3d.animateAction._clip.duration,c=e.base3d.animateAction.time,o=Math.floor(c/d*4);e.descIndex=o}),(n,d)=>{const c=z;return l(),u(h,null,[k(a("div",Q,[_(R,{progress:t(e).progress},null,8,["progress"])],512),[[B,t(e).isLoading]]),k(a("div",U,[t(e).products[t(e).pIndex]?(l(!0),u(h,{key:0},g(t(e).products[t(e).pIndex].desc,(o,r)=>(l(),u("div",{class:m(["desc",{active:t(e).descIndex==r}])},[a("h1",W,f(o.title),1),a("p",X,f(o.content),1)],2))),256)):A("",!0),a("div",{class:m(["prod-list",{hidden:t(s).state.isFullscreen}])},[a("h1",null,[_(t(D)),Z]),a("div",ee,[(l(!0),u(h,null,g(t(e).products,(o,r)=>(l(),u("div",{class:m(["prod-item",{active:r==t(e).pIndex}]),onClick:p=>L(o,r)},[a("div",te,f(o.title),1),a("div",oe,[a("img",{src:o.imgsrc,alt:o.title},null,8,ne)]),_(c,{style:{"background-color":"rgb(222, 167, 65)",border:"0"},block:"",onClick:q(p=>E(o),["stop"])},{icon:C(()=>[_(t(G))]),default:C(()=>[ae]),_:2},1032,["onClick"])],10,se))),256))])],2),a("div",{class:m(["scene-list",{hidden:t(s).state.isFullscreen}])},[a("h3",null,[_(t(Y)),de]),a("div",ie,[(l(!0),u(h,null,g(t(e).scenes,(o,r)=>(l(),u("div",{class:"scene-item",onClick:p=>F(o,r)},[a("img",{class:m({active:r==t(e).sceneIndex}),src:`./files/hdr/${o}.jpg`,alt:o},null,10,re)],8,ce))),256))])],2)],512),[[B,!t(e).isLoading]])],64)}}};var ge=J(le,[["__scopeId","data-v-4fed1258"]]);export{ge as default};
